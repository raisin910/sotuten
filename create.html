<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Åà„Åª„Çì„Çí„Å§„Åè„Çã - „Åà„Åª„Çì„ÅÆ„Åè„Å´</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/create.css">
    <link rel="stylesheet" href="css/freeInput.css">
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700&display=swap" rel="stylesheet">
    <script src="js/vercel-env.js"></script>
</head>
<body>
    <!-- ËÉåÊôØË¶ÅÁ¥† -->
    <div class="sky-background"></div>
    <div class="ground-background"></div>
    
    <!-- Ë£ÖÈ£æË¶ÅÁ¥† -->
    <div class="cloud cloud1"></div>
    <div class="cloud cloud2"></div>
    <div class="cloud cloud3"></div>

    <div id="app">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <header class="header">
            <button class="back-button" onclick="navigate('/')">
                <img src="assets/images/icons/back-arrow.png" alt="„ÇÇ„Å©„Çã">
            </button>
            <h1>„Åà„Åª„Çì„Çí„Å§„Åè„Çã</h1>
            <button class="home-button" onclick="navigate('/')">
                <img src="assets/images/icons/home-icon.png" alt="„Éõ„Éº„É†">
            </button>
        </header>

        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <main class="main-content">
            <!-- „É¢„Éº„ÉâÈÅ∏ÊäûÁîªÈù¢ -->
            <section id="mode-selection" class="screen active">
                <h2>„Å©„Å£„Å°„Åß „Å§„Åè„ÇãÔºü</h2>
                <div class="mode-buttons">
                    <button class="mode-button free-mode" onclick="startFreeMode()">
                        <span class="mode-icon">‚úèÔ∏è</span>
                        <span class="mode-title">„Åò„ÇÜ„ÅÜ„Å´ „Å§„Åè„Çã</span>
                        <span class="mode-description">„Åä„ÅØ„Å™„Åó„Çí „Åã„Çì„Åå„Åà„Å¶ „Å§„Åè„Çã</span>
                    </button>
                    <button class="mode-button select-mode" onclick="startSelectMode()">
                        <span class="mode-icon">üéØ</span>
                        <span class="mode-title">„Åà„Çâ„Çì„Åß „Å§„Åè„Çã</span>
                        <span class="mode-description">„Ç≠„É£„É©„ÇØ„Çø„Éº„Çí „Åà„Çâ„Çì„Åß „Å§„Åè„Çã</span>
                    </button>
                </div>
            </section>

            <!-- Ëá™Áî±ÂÖ•Âäõ„É¢„Éº„Éâ -->
            <section id="free-input-screen" class="screen">
                <div class="free-input-container">
                    <h2>„Å©„Çì„Å™ „Åä„ÅØ„Å™„Åó„Åå „Çà„Åø„Åü„ÅÑÔºü</h2>
                    
                    <textarea id="story-input" 
                              placeholder="„Çå„ÅÑÔºö„Åù„Çâ„Çí„Å®„Å∂ „Å≠„Åì„ÅÆ „Åº„ÅÜ„Åë„Çì"
                              rows="4"></textarea>
                    
                    <div class="input-buttons">
                        <button class="voice-input-btn" onclick="startVoiceInput()">
                            <img src="assets/images/icons/microphone-icon.png" alt="„Éû„Ç§„ÇØ">
                            <span>„Åä„ÅØ„Å™„Åó„Åô„Çã</span>
                        </button>
                    </div>
                    
                    <div class="input-hints">
                        <p>„Åü„Å®„Åà„Å∞...</p>
                        <div class="hint-buttons">
                            <button class="hint-btn" onclick="useHint('„ÅÜ„Å°„ÇÖ„ÅÜ„Å´ „ÅÑ„Åè „Åä„ÅØ„Å™„Åó')">
                                „ÅÜ„Å°„ÇÖ„ÅÜ„Å´ „ÅÑ„Åè „Åä„ÅØ„Å™„Åó
                            </button>
                            <button class="hint-btn" onclick="useHint('„Åæ„Åª„ÅÜ„Åå „Å§„Åã„Åà„Çã „Å©„ÅÜ„Å∂„Å§')">
                                „Åæ„Åª„ÅÜ„Åå „Å§„Åã„Åà„Çã „Å©„ÅÜ„Å∂„Å§
                            </button>
                            <button class="hint-btn" onclick="useHint('„Å®„ÇÇ„Å†„Å°„Å® „Åü„Åã„Çâ„Åï„Åå„Åó')">
                                „Å®„ÇÇ„Å†„Å°„Å® „Åü„Åã„Çâ„Åï„Åå„Åó
                            </button>
                        </div>
                    </div>
                    
                    <button class="next-btn" onclick="confirmFreeInput()" disabled>
                        „Å§„Åé„Å∏
                    </button>
                </div>
            </section>

            <!-- ÈÅ∏Êäû„É¢„Éº„ÉâÔºö„Ç≠„É£„É©„ÇØ„Çø„ÉºÈÅ∏Êäû -->
            <section id="character-selection" class="screen">
                <h2>„Å†„Çå„Åå „Åó„ÇÖ„Åò„Çì„Åì„ÅÜÔºü</h2>
                <div class="selection-grid">
                    <button class="selection-item" data-character="cat">
                        <img src="assets/images/characters/cat.png" alt="„Å≠„Åì">
                        <span>„Å≠„Åì</span>
                    </button>
                    <button class="selection-item" data-character="rabbit">
                        <img src="assets/images/characters/rabbit.png" alt="„ÅÜ„Åï„Åé">
                        <span>„ÅÜ„Åï„Åé</span>
                    </button>
                    <button class="selection-item" data-character="bear">
                        <img src="assets/images/characters/bear.png" alt="„Åè„Åæ">
                        <span>„Åè„Åæ</span>
                    </button>
                    <button class="selection-item" data-character="girl">
                        <img src="assets/images/characters/girl.png" alt="„Åä„Çì„Å™„ÅÆ„Åì">
                        <span>„Åä„Çì„Å™„ÅÆ„Åì</span>
                    </button>
                    <button class="selection-item" data-character="boy">
                        <img src="assets/images/characters/boy.png" alt="„Åä„Å®„Åì„ÅÆ„Åì">
                        <span>„Åä„Å®„Åì„ÅÆ„Åì</span>
                    </button>
                    <button class="selection-item" data-character="robot">
                        <img src="assets/images/characters/robot.png" alt="„É≠„Éú„ÉÉ„Éà">
                        <span>„É≠„Éú„ÉÉ„Éà</span>
                    </button>
                </div>
            </section>

            <!-- ÈÅ∏Êäû„É¢„Éº„ÉâÔºöËàûÂè∞ÈÅ∏Êäû -->
            <section id="setting-selection" class="screen">
                <h2>„Å©„Åì„Åß „Åä„ÅØ„Å™„Åó„Åå „Åä„Åç„ÇãÔºü</h2>
                <div class="selection-grid">
                    <button class="selection-item" data-setting="forest">
                        <img src="assets/images/settings/forest.png" alt="„ÇÇ„Çä">
                        <span>„ÇÇ„Çä</span>
                    </button>
                    <button class="selection-item" data-setting="ocean">
                        <img src="assets/images/settings/ocean.png" alt="„ÅÜ„Åø">
                        <span>„ÅÜ„Åø</span>
                    </button>
                    <button class="selection-item" data-setting="space">
                        <img src="assets/images/settings/space.png" alt="„ÅÜ„Å°„ÇÖ„ÅÜ">
                        <span>„ÅÜ„Å°„ÇÖ„ÅÜ</span>
                    </button>
                    <button class="selection-item" data-setting="city">
                        <img src="assets/images/settings/city.png" alt="„Åæ„Å°">
                        <span>„Åæ„Å°</span>
                    </button>
                    <button class="selection-item" data-setting="castle">
                        <img src="assets/images/settings/castle.png" alt="„Åä„Åó„Çç">
                        <span>„Åä„Åó„Çç</span>
                    </button>
                    <button class="selection-item" data-setting="candy">
                        <img src="assets/images/settings/candy.png" alt="„Åä„Åã„Åó„ÅÆ„Åè„Å´">
                        <span>„Åä„Åã„Åó„ÅÆ„Åè„Å´</span>
                    </button>
                </div>
            </section>

            <!-- ÈÅ∏Êäû„É¢„Éº„ÉâÔºö„ÉÜ„Éº„ÉûÈÅ∏Êäû -->
            <section id="theme-selection" class="screen">
                <h2>„Å©„Çì„Å™ „Åä„ÅØ„Å™„ÅóÔºü</h2>
                <div class="selection-grid">
                    <button class="selection-item" data-theme="friendship">
                        <img src="assets/images/themes/friendship.png" alt="„Å®„ÇÇ„Å†„Å°">
                        <span>„Å®„ÇÇ„Å†„Å°</span>
                    </button>
                    <button class="selection-item" data-theme="treasure">
                        <img src="assets/images/themes/treasure.png" alt="„Åü„Åã„Çâ„Åï„Åå„Åó">
                        <span>„Åü„Åã„Çâ„Åï„Åå„Åó</span>
                    </button>
                    <button class="selection-item" data-theme="helping">
                        <img src="assets/images/themes/helping.png" alt="„Åü„Åô„Åë„Çã">
                        <span>„Åü„Åô„Åë„Çã</span>
                    </button>
                    <button class="selection-item" data-theme="adventure">
                        <img src="assets/images/themes/adventure.png" alt="„Åº„ÅÜ„Åë„Çì">
                        <span>„Åº„ÅÜ„Åë„Çì</span>
                    </button>
                    <button class="selection-item" data-theme="magic">
                        <img src="assets/images/themes/magic.png" alt="„Åæ„Åª„ÅÜ">
                        <span>„Åæ„Åª„ÅÜ</span>
                    </button>
                    <button class="selection-item" data-theme="party">
                        <img src="assets/images/themes/party.png" alt="„Éë„Éº„ÉÜ„Ç£„Éº">
                        <span>„Éë„Éº„ÉÜ„Ç£„Éº</span>
                    </button>
                </div>
            </section>

            <!-- Á¢∫Ë™çÁîªÈù¢ -->
            <section id="confirmation-screen" class="screen">
                <h2>„Åì„Çå„Åß „ÅÑ„ÅÑ„Åã„Å™Ôºü</h2>
                <div class="confirmation-content">
                    <div id="free-input-confirmation" class="confirmation-item" style="display: none;">
                        <h3>„Åä„ÅØ„Å™„ÅóÔºö</h3>
                        <p id="input-text-display"></p>
                    </div>
                    <div id="select-mode-confirmation" style="display: none;">
                        <div class="confirmation-item">
                            <h3>„Åó„ÇÖ„Åò„Çì„Åì„ÅÜÔºö</h3>
                            <div class="selected-display" id="character-display"></div>
                        </div>
                        <div class="confirmation-item">
                            <h3>„Å∞„Åó„ÇáÔºö</h3>
                            <div class="selected-display" id="setting-display"></div>
                        </div>
                        <div class="confirmation-item">
                            <h3>„Åä„ÅØ„Å™„ÅóÔºö</h3>
                            <div class="selected-display" id="theme-display"></div>
                        </div>
                    </div>
                </div>
                <div class="confirmation-buttons">
                    <button class="restart-btn" onclick="restartCreation()">
                        <img src="assets/images/icons/restart-icon.png" alt="„ÇÑ„Çä„Å™„Åä„Åô">
                        „ÇÑ„Çä„Å™„Åä„Åô
                    </button>
                    <button class="generate-btn" onclick="generateStory()">
                        <img src="assets/images/icons/magic-icon.png" alt="„Å§„Åè„Çã">
                        „Åà„Åª„Çì„Çí „Å§„Åè„ÇãÔºÅ
                    </button>
                </div>
            </section>

            <!-- ÁîüÊàê‰∏≠ÁîªÈù¢ -->
            <section id="generating-screen" class="screen">
                <div class="generating-content">
                    <div class="magic-animation">
                        <img src="assets/images/magic-wand.png" alt="„Åæ„Åª„ÅÜ„ÅÆ„Å§„Åà" class="wand-icon">
                    </div>
                    <h2 class="generating-text">„Åæ„Åª„ÅÜ„Åß „Åä„ÅØ„Å™„Åó„Çí „Å§„Åè„Å£„Å¶„ÅÑ„Åæ„Åô...</h2>
                    <div class="generating-progress">
                        <div class="progress-bar"></div>
                    </div>
                </div>
            </section>

            <!-- ÂÆåÊàêÁîªÈù¢ -->
            <section id="complete-screen" class="screen">
                <div class="complete-content">
                    <h2>„Åà„Åª„Çì„Åå „Åß„Åç„Åü„ÇàÔºÅ</h2>
                    <div class="story-preview">
                        <h3 id="story-title"></h3>
                        <p id="story-summary"></p>
                    </div>
                    <div class="complete-buttons">
                        <button class="read-btn" onclick="readStory()">
                            <img src="assets/images/icons/book-icon.png" alt="„Çà„ÇÄ">
                            „Çà„ÇÄ
                        </button>
                        <button class="edit-btn" onclick="editStory()">
                            <img src="assets/images/icons/pencil-icon.png" alt="„Å™„Åä„Åô">
                            „Å™„Åä„Åô
                        </button>
                        <button class="new-btn" onclick="createNewStory()">
                            <img src="assets/images/icons/new-icon.png" alt="„ÅÇ„Åü„Çâ„Åó„Åè">
                            „ÅÇ„Åü„Çâ„Åó„Åè „Å§„Åè„Çã
                        </button>
                    </div>
                </div>
            </section>
        </main>

        <!-- „Éû„Çπ„Ç≥„ÉÉ„Éà„Ç®„É™„Ç¢ -->
        <div class="mascot-area">
            <img src="assets/images/characters/mascot.png" alt="„Éû„Çπ„Ç≥„ÉÉ„Éà" class="mascot-img">
        </div>

        <!-- Èü≥Â£∞ÂÖ•Âäõ„Ç™„Éº„Éê„Éº„É¨„Ç§ -->
        <div id="voice-input-overlay" class="voice-overlay">
            <div class="voice-content">
                <div class="voice-animation">
                    <div class="voice-wave"></div>
                </div>
                <p class="voice-status">„Åä„ÅØ„Å™„Åó„Çí „Åç„ÅÑ„Å¶„ÅÑ„Åæ„Åô...</p>
                <div class="voice-result" id="voice-result"></div>
                <button class="voice-stop-btn" onclick="stopVoiceInput()">
                    „Åä„Çè„Çä
                </button>
            </div>
        </div>

        <!-- „É≠„Éº„Éá„Ç£„É≥„Ç∞„Ç™„Éº„Éê„Éº„É¨„Ç§ -->
        <div id="loading-overlay" class="loading-overlay">
            <div class="loading-spinner"></div>
        </div>
    </div>

    <!-- „É≠„Éº„Ç´„É´Ë®≠ÂÆöÔºàGitÁÆ°ÁêÜÂØæË±°Â§ñÔºâ -->
    <script src="js/config.local.js"></script>
    <script src="js/config.js"></script>
    <script src="js/main.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/storyCreator.js"></script>
    <script src="js/freeInputMode.js"></script>
    <script src="js/voiceInput.js"></script>
    <script src="js/geminiStoryGenerator.js"></script>
</body>
</html>